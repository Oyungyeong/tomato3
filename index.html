<!DOCTYPE html>
<html>
<head>
  <title>ğŸ…</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Do+Hyeon&display=swap" rel="stylesheet">

  <style>
    body, h1, h2, h3, h4, p, ul { margin: 0; padding: 0; }
    .image-container { width: 100vw; height: 100vh; overflow: hidden; }
    .image-container img { width: 100%; height: 100%; object-fit: cover; }
    body { cursor: url('img/hand.png'), auto; }
    .do-hyeon-regular { font-family: "Do Hyeon", sans-serif; }

    /* ë¡œë”© ì˜ìƒ */
    #loadingVideo {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 10;
    }

    /* select ë²„íŠ¼ */
    .wrap {
      display: none; /* ì²˜ìŒì—ëŠ” ìˆ¨ê¹€ */
      flex-direction: column;
      align-items: center;
      position: absolute;
      top: 55%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .box {
      display: flex;
      justify-content: center;
      align-items: center;
      width: 300px;
      height: 150px;
      margin: 20px;
      border: 5px solid saddlebrown;
      text-align: center;
      border-radius: 20px;
      background-color: white;
      font-size: 2rem;
    }

    /* ì¤‘ì•™ì— ë‚˜íƒ€ë‚  ì´ë¯¸ì§€ ìŠ¤íƒ€ì¼ */
    #capreseImage, #iceImage, #eggImage {
      display: none; /* ì²˜ìŒì—ëŠ” ìˆ¨ê¹€ */
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      width: 500px;
      height: auto;
      z-index: 5;
    }

    /* ìš”ë¦¬ ë¹„ë””ì˜¤ */
    #cookingVideo {
      position: absolute;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      object-fit: cover;
      z-index: 15;
      display: none; /* ì²˜ìŒì—ëŠ” ìˆ¨ê¹€ */
    }
  </style>
</head>

<body>
  <!-- ë¡œë”© ë¹„ë””ì˜¤ -->
  <video id="loadingVideo" autoplay muted>
    <source src="loading.mp4" type="video/mp4">
  </video>

  <!-- ìš”ë¦¬ ë¹„ë””ì˜¤ -->
  <video id="cookingVideo" autoplay muted>
    <source src="cooking.mp4" type="video/mp4">
  </video>

  <!-- ë†ì¥ ë°°ê²½ -->
  <div class="image-container" id="farm-image">
    <img src="./img/farm.png">
  </div>

  <button id="myButton" class="do-hyeon-regular" style="position:absolute; height: 200px; width: 350px; top: 40%; left: 40%; font-size: 2rem; border-radius: 20px; background:white; border: 5px solid saddlebrown; padding: 10px; color: saddlebrown; z-index:2;" onclick="checkAndCreateNewButton()">í† ë§ˆí† ë¥¼ ìˆ˜í™•í•´ ë³´ì!</button>

  <!-- í† ë§ˆí†  ì´ë¯¸ì§€ë“¤ -->
  <div id="tomato1" style="position: absolute;">
    <img src="./img/tomato.png" class="tomato" style="position: fixed; top: 500px;">
  </div>
  <div id="tomato2" style="position: absolute;">
    <img src="./img/tomato.png" class="tomato" style="position: fixed; top: 400px; left: 360px;">
  </div>
  <div id="tomato3" style="position: absolute;">
    <img src="./img/tomato.png" class="tomato" style="position: fixed; top: 100px; left: 650px;">
  </div>
  <div id="tomato4" style="position: absolute;">
    <img src="./img/tomato.png" class="tomato" style="position: fixed; top: 340px; left: 800px;">
  </div>
  <div id="tomato5" style="position: absolute;">
    <img src="./img/tomato.png" class="tomato" style="position: fixed; top: 500px; left: 900px;">
  </div>
  <div id="tomato6" style="position: absolute;">
    <img src="./img/tomato.png" class="tomato" style="position: fixed; top: 420px; left: 1150px;">
  </div>

  <div id="new-element"></div>  
  <div id="select" style="background: #FAF574; position: fixed; z-index: 3; display: none;"></div>

  <!-- ì„ íƒ í™”ë©´ -->
  <div class="wrap do-hyeon-regular" id="wrap">
    <div id="what" style="top: 10px; left: center; font-size: 2.5rem;">ì–´ë–¤ ìš”ë¦¬ë¥¼ í• ê¹Œ?</div>
    <div id="box1" class="box do-hyeon-regular">í† ë§ˆí†  ì¹´í”„ë ˆì œ</div>
    <div id="box2" class="box do-hyeon-regular">í† ë§ˆí†  ë¹™ìˆ˜</div>
    <div id="box3" class="box do-hyeon-regular">í† ë§ˆí†  ë‹¬ê±€ë³¶ìŒ</div>
  </div>

  <!-- ì¤‘ì•™ì— í‘œì‹œë  ìŒì‹ ì´ë¯¸ì§€ -->
  <img id="capreseImage" src="./img/Caprese.png" alt="í† ë§ˆí†  ì¹´í”„ë ˆì œ">
  <img id="iceImage" src="./img/ice.png" alt="í† ë§ˆí†  ë¹™ìˆ˜">
  <img id="eggImage" src="./img/egg.png" alt="í† ë§ˆí†  ë‹¬ê±€ë³¶ìŒ">

<script>
  // í˜ì´ì§€ê°€ ë¡œë“œë  ë•Œ ì‹¤í–‰
  window.onload = function() {
    const loadingVideo = document.getElementById('loadingVideo');
    const cookingVideo = document.getElementById('cookingVideo');
    const myButton = document.getElementById('myButton');
    const wrap = document.getElementById('wrap');
    const imageContainer = document.getElementById('farm-image');
    const capreseImage = document.getElementById('capreseImage');
    const iceImage = document.getElementById('iceImage');
    const eggImage = document.getElementById('eggImage');
    const backButton = document.getElementById('backButton');

    // ë™ì˜ìƒ ì¬ìƒì´ ëë‚˜ë©´ ë¹„ë””ì˜¤ ìˆ¨ê¸°ê¸°
    loadingVideo.onended = function() {
      loadingVideo.style.display = 'none';
    };

    // í´ë¦­ëœ í† ë§ˆí† ì™€ ë²„íŠ¼ ì¹´ìš´íŠ¸
    let clickedTomatoes = 0;
    const totalClicks = 7; // myButton í´ë¦­ 1íšŒ + í† ë§ˆí†  6ê°œ í´ë¦­

    // ëª¨ë“  í† ë§ˆí†  ë° ë²„íŠ¼ í´ë¦­ë˜ë©´ ìƒˆë¡œìš´ ì´ë¯¸ì§€ë¥¼ í‘œì‹œí•˜ëŠ” í•¨ìˆ˜
    function checkAndCreateNewButton() {
      clickedTomatoes++;

      if (clickedTomatoes === totalClicks) {
        const newImage = document.createElement('img');
        newImage.src = './img/all.png';
        newImage.style.width = '800px';
        newImage.style.height = '530px';
        newImage.style.position = 'absolute';
        newImage.style.top = '50%';
        newImage.style.left = '50%';
        newImage.style.transform = 'translate(-50%, -50%)';
        document.body.appendChild(newImage);

        // ìƒˆë¡œìš´ ì´ë¯¸ì§€ í´ë¦­ ì‹œ wrap í™”ë©´ í‘œì‹œ ë° ë°°ê²½ ìƒ‰ ë³€ê²½
        newImage.addEventListener('click', () => {
          newImage.style.display = 'none';
          imageContainer.style.display = 'none'; // image-container ìˆ¨ê¸°ê¸°
          wrap.style.display = 'flex'; // wrap í™”ë©´ ë³´ì´ê¸°
          backButton.style.display = 'block'; // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ë³´ì´ê¸°
        });
      }
    }

    // myButton í´ë¦­ ì‹œ count ì¦ê°€
    myButton.addEventListener('click', () => {
      myButton.style.display = 'none';
      checkAndCreateNewButton();
    });

    // ê° í† ë§ˆí†  ì´ë¯¸ì§€ í´ë¦­ ì‹œ checkAndCreateNewButton() í˜¸ì¶œ
    const tomatoImages = document.querySelectorAll('.tomato');
    tomatoImages.forEach(tomato => {
      tomato.addEventListener('click', () => {
        tomato.style.display = 'none';
        checkAndCreateNewButton();
      });
    });

    // box í´ë¦­ ì‹œ ìš”ë¦¬ ë¹„ë””ì˜¤ ì¬ìƒ
    function playCookingVideo(callback) {
      cookingVideo.style.display = 'block'; // ë¹„ë””ì˜¤ ë³´ì´ê¸°
      cookingVideo.play(); // ë¹„ë””ì˜¤ ì¬ìƒ
      
      cookingVideo.onended = function() {
        cookingVideo.style.display = 'none'; // ë¹„ë””ì˜¤ ìˆ¨ê¸°ê¸°
        if (callback) callback(); // ì½œë°± í•¨ìˆ˜ í˜¸ì¶œ
      };
    }

    // box1 í´ë¦­ ì‹œ
    const box1 = document.getElementById('box1');
    box1.addEventListener('click', () => {
      playCookingVideo(() => {
        document.getElementById('what').style.display = 'none'; // "what" ìˆ¨ê¸°ê¸°
        box1.style.display = 'none';
        document.getElementById('box2').style.display = 'none'; // "box2" ìˆ¨ê¸°ê¸°
        document.getElementById('box3').style.display = 'none'; // "box3" ìˆ¨ê¸°ê¸°
        document.body.style.backgroundColor = '#4FEB6F'; // ë°°ê²½ ìƒ‰ì„ ì´ˆë¡ìƒ‰ìœ¼ë¡œ ë³€ê²½
        capreseImage.style.display = 'block'; // Caprese ì´ë¯¸ì§€ í‘œì‹œ
      });
    });

    // box2 í´ë¦­ ì‹œ
    const box2 = document.getElementById('box2');
    box2.addEventListener('click', () => {
      playCookingVideo(() => {
        document.getElementById('what').style.display = 'none'; // "what" ìˆ¨ê¸°ê¸°
        box1.style.display = 'none';
        box2.style.display = 'none'; // "box2" ìˆ¨ê¸°ê¸°
        document.getElementById('box3').style.display = 'none'; // "box3" ìˆ¨ê¸°ê¸°
        document.body.style.backgroundColor = '#FCF592'; // ë°°ê²½ ìƒ‰ì„ ë…¸ë€ìƒ‰ìœ¼ë¡œ ë³€ê²½
        iceImage.style.display = 'block'; // ice ì´ë¯¸ì§€ í‘œì‹œ
      });
    });

    // box3 í´ë¦­ ì‹œ
    const box3 = document.getElementById('box3');
    box3.addEventListener('click', () => {
      playCookingVideo(() => {
        document.getElementById('what').style.display = 'none'; // "what" ìˆ¨ê¸°ê¸°
        box1.style.display = 'none';
        box2.style.display = 'none'; // "box2" ìˆ¨ê¸°ê¸°
        box3.style.display = 'none'; // "box3" ìˆ¨ê¸°ê¸°
        document.body.style.backgroundColor = '#F55220'; // ë°°ê²½ ìƒ‰ì„ ë¹¨ê°„ìƒ‰ìœ¼ë¡œ ë³€ê²½
        eggImage.style.display = 'block'; // egg ì´ë¯¸ì§€ í‘œì‹œ
      });
    });

    // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ í´ë¦­ ì‹œ wrap í™”ë©´ìœ¼ë¡œ ëŒì•„ê°€ê¸°
    backButton.addEventListener('click', () => {
      wrap.style.display = 'flex'; // wrap í™”ë©´ ë³´ì´ê¸°
      backButton.style.display = 'none'; // ë’¤ë¡œê°€ê¸° ë²„íŠ¼ ìˆ¨ê¸°ê¸°
      document.body.style.backgroundColor = ''; // ë°°ê²½ ìƒ‰ ì´ˆê¸°í™”
      capreseImage.style.display = 'none'; // Caprese ì´ë¯¸ì§€ ìˆ¨ê¸°ê¸°
      iceImage.style.display = 'none'; // ice ì´ë¯¸ì§€ ìˆ¨ê¸°ê¸°
      eggImage.style.display = 'none'; // egg ì´ë¯¸ì§€ ìˆ¨ê¸°ê¸°
      imageContainer.style.display = 'block'; // image-container ë³´ì´ê¸°
      clickedTomatoes = 0; // í´ë¦­ ì¹´ìš´íŠ¸ ì´ˆê¸°í™”
    });
  };
</script>

</body>
</html>

